{
    "openapi": "3.0.3",
    "info": {
        "title": "Cloud PAW Management",
        "description": "Microsoft Endpoint Manager (Intune) Cloud Privileged Access Workstation (PAW) Lifecycle Management and Deployment App.",
        "contact": {
            "email": "elliot.huffman@microsoft.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://github.com/microsoft/Cloud-PAW-Management/blob/main/LICENSE"
        },
        "version": "appVersionFromConfigEngine"
    },
    "externalDocs": {
        "description": "Official Documentation",
        "url": "https://github.com/microsoft/Cloud-PAW-Management/wiki"
    },
    "servers": [
        {
            "url": "https://contoso.local:80/",
            "description": "A secured connection to the app, only secured connections should be used for production."
        },
        {
            "url": "http://contoso.local:443/",
            "description": "Used only for local dev, never host this app without network encryption."
        }
    ],
    "tags": [
        {
            "name": "Lifecycle Management",
            "description": "PAW Device Management",
            "externalDocs": {
                "description": "Read the wiki page",
                "url": "https://github.com/microsoft/Cloud-PAW-Management/wiki/PAW-Lifecycle-Management-API-Endpoints"
            }
        },
        {
            "name": "Infrastructure Deployment",
            "description": "Coming soon!",
            "externalDocs": {
                "description": "Read the wiki page",
                "url": "https://github.com/microsoft/Cloud-PAW-Management/wiki/Infrastructure-Deployment-API-Endpoints"
            }
        },
        {
            "name": "Debug Mode",
            "description": "Endpoints that are exposed only in debug mode. You can use these to see as the app sees.",
            "externalDocs": {
                "description": "Read the wiki page",
                "url": "https://github.com/microsoft/Cloud-PAW-Management/wiki/Debug-API-Endpoints"
            }
        }
    ],
    "paths": {
        "/Docs": {
            "get": {
                "operationId": "swaggerUI",
                "tags": [
                    "Debug Mode"
                ],
                "summary": "Render this Swagger UI",
                "description": "Runs the Swagger UI render to render the OpenAPI spec that you are viewing now.",
                "responses": {
                    "200": {
                        "description": "Returns the HTML for Swagger UI renderer's output"
                    }
                }
            }
        },
        "/Debug/accessToken": {
            "get": {
                "operationId": "debugAccessToken",
                "tags": [
                    "Debug Mode"
                ],
                "summary": "Returns an access token in the app's auth context",
                "description": "Returns the access token that the web server is using for authenticating to the MS Graph API.",
                "responses": {
                    "200": {
                        "description": "Successful Operation. You can securely decode the access token using https://jwt.ms",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AccessToken"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/Debug/envVar": {
            "get": {
                "operationId": "debugEnvVar",
                "tags": [
                    "Debug Mode"
                ],
                "summary": "List Environmental Variables",
                "description": "Returns a list of the enviornmental variables accessible to the API server",
                "responses": {
                    "200": {
                        "description": "Successful Operation",
                        "content": {
                            "application/json": {
                                "example": {
                                    "debug": "true",
                                    "Scope_Tag": "Cloud-PAW-Mgmt",
                                    "port": "4000"
                                },
                                "schema": {
                                    "$ref": "#/components/schemas/EnvironmentalVariables"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/Debug/testPost": {
            "post": {
                "operationId": "debugPost",
                "tags": [
                    "Debug Mode"
                ],
                "summary": "Returns posted data to the caller.",
                "description": "Returns JSON data posted to the endpoint to test if the server is getting posts and can parse them.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": {
                                    "type": "object"
                                }
                            },
                            "examples": {
                                "Hello World": {
                                    "summary": "Generic Hello World",
                                    "description": "This example is a generic hello world example where the property name is hello and the value is world.",
                                    "value": "{\"Hello\": \"World!\"}"
                                },
                                "Multi-Property": {
                                    "summary": "Object with multiple properties",
                                    "description": "This example is an object with multiple properties.",
                                    "value": "{\"abc\": \"123\", \"def\": \"!@#\"}"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {
                                        "type": "object"
                                    }
                                },
                                "examples": {
                                    "Hello World": {
                                        "summary": "Generic Hello World",
                                        "description": "This example is a generic hello world example where the property name is hello and the value is world.",
                                        "value": "{\"Hello\": \"World!\"}"
                                    },
                                    "Multi-Property": {
                                        "summary": "Object with multiple properties",
                                        "description": "This example is an object with multiple properties.",
                                        "value": "{\"abc\": \"123\", \"def\": \"!@#\"}"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "text/html": {
                                "schema": {
                                    "type": "string",
                                    "example": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<title>Error</title>\n</head>\n<body>\n<pre>SyntaxError: Unexpected end of JSON input<br> &nbsp; &nbsp;at JSON.parse (&lt;anonymous&gt;)<br> &nbsp; &nbsp;at parse (json.js:89:19)<br></pre>\n</body>\n</html>"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/Debug/roleScopeTag": {
            "post": {
                "operationId": "debugPostRoleScopeTag",
                "tags": [
                    "Debug Mode"
                ],
                "summary": "Create a new Role Scope Tag.",
                "description": "Creates a new Endpoint Manager role scope tag using the MS Graph API.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "maxLength": 128,
                                        "minLength": 1
                                    },
                                    "description": {
                                        "type": "string",
                                        "maxLength": 1024
                                    }
                                },
                                "required": [
                                    "name"
                                ]
                            },
                            "examples": {
                                "Name only": {
                                    "summary": "Name only tag creation",
                                    "description": "Create a role scope tag with a name only.",
                                    "value": "{\"name\": \"Cloud-PAW-Management\"}"
                                },
                                "Name and Description": {
                                    "summary": "Name and Description tag creation",
                                    "description": "Create a role scope tag with a name and a description field.",
                                    "value": "{\"name\": \"Cloud-PAW-Management\", \"description\": \"PAWSecGrp=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\\nUsrSecGrp=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\\nSiloRootGrp=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\\nBrkGls=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\\nUsrTag=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\"}"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "$ref": "#/components/schemas/roleScopeTag"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "operationId": "debugGetRoleScopeTag",
                "tags": [
                    "Debug Mode"
                ],
                "summary": "Return array of role scope tags.",
                "description": "Returns an array of all the role scope tag objects from the MS Graph API.",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "minItems": 0,
                                    "items": {
                                        "$ref": "#/components/schemas/roleScopeTag"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/Debug/roleScopeTag/{identifier}": {
            "get": {
                "operationId": "debugGetRoleScopeTagByIdentifier",
                "tags": [
                    "Debug Mode"
                ],
                "summary": "Get the specific role scope tag",
                "description": "Get the role scope tag by the name of the tag. Returns the first match, if more than one match exists. This is possible if a duplicate display name value is specified during scope tag creation via the Graph API.",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "maxItems": 1,
                                    "minItems": 0,
                                    "items": {
                                        "$ref": "#/components/schemas/roleScopeTag"
                                    }
                                }
                            }
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "identifier",
                        "description": "The display name property of the role scope tag to retrieve.",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "maxLength": 128,
                            "minLength": 1,
                            "example": "Privileged-Security-Management"
                        }
                    }
                ]
            },
            "patch": {
                "operationId": "debugUpdateRoleScopeTagByIdentifier",
                "tags": [
                    "Debug Mode"
                ],
                "summary": "Update the specified role scope tag",
                "description": "Update the specified role scope tag's values. The ID field is read only but can be specified to update the name field's value while operating on the specified entity ID.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "description": {
                                        "type": "string",
                                        "maxLength": 1024,
                                        "minLength": 0
                                    },
                                    "ID": {
                                        "type": "number",
                                        "minimum": 1
                                    }
                                },
                                "required": [
                                    "description"
                                ]
                            },
                            "examples": {
                                "Update Description": {
                                    "summary": "Update description only",
                                    "description": "Updates the description field only as the name is used as the entity identifier.",
                                    "value": "{\"description\": \"Hello world!\"}"
                                },
                                "Update Name and Description": {
                                    "summary": "Update name and description",
                                    "description": "Updates the name and the description fields as the ID is used as the entity identifier, allowing the name parameter to be written as the new display name. The name's value is grabbed from the identifier parameter.",
                                    "value": "{\"ID\": 3, \"description\": \"PAWSecGrp=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\\nUsrSecGrp=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\\nSiloRootGrp=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\\nBrkGls=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\\nUsrTag=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\"}"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "$ref": "#/components/schemas/roleScopeTag"
                                }
                            }
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "identifier",
                        "description": "The display name property of the role scope tag to update.",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "maxLength": 128,
                            "minLength": 1,
                            "example": "Privileged-Security-Management"
                        }
                    }
                ]
            },
            "delete": {
                "operationId": "debugDeleteRoleScopeTagByIdentifier",
                "tags": [
                    "Debug Mode"
                ],
                "summary": "Delete the specified role scope tag",
                "description": "Deletes the specified role scope tag based on the ID specified in the parameter.",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "boolean",
                                    "example": true
                                }
                            }
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "identifier",
                        "description": "The display name property of the role scope tag to delete.",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "number",
                            "minimum": 1,
                            "example": "3"
                        }
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "AccessToken": {
                "type": "object",
                "properties": {
                    "token": {
                        "type": "string",
                        "example": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Imk2bEdrM0ZaenhSY1ViMkMzbkVRN3N5SEpsWSIsImtpZCI6Imk2bEdrM0ZaenhSY1ViMkMzbkVRN3N5SEpsWSJ9.eyJhdWQiOiJlZjFkYTlkNC1mZjc3LTRjM2UtYTAwNS04NDBjM2Y4MzA3NDUiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC9mYTE1ZDY5Mi1lOWM3LTQ0NjAtYTc0My0yOWYyOTUyMjIyOS8iLCJpYXQiOjE1MzcyMzMxMDYsIm5iZiI6MTUzNzIzMzEwNiwiZXhwIjoxNTM3MjM3MDA2LCJhY3IiOiIxIiwiYWlvIjoiQVhRQWkvOElBQUFBRm0rRS9RVEcrZ0ZuVnhMaldkdzhLKzYxQUdyU091TU1GNmViYU1qN1hPM0libUQzZkdtck95RCtOdlp5R24yVmFUL2tES1h3NE1JaHJnR1ZxNkJuOHdMWG9UMUxrSVorRnpRVmtKUFBMUU9WNEtjWHFTbENWUERTL0RpQ0RnRTIyMlRJbU12V05hRU1hVU9Uc0lHdlRRPT0iLCJhbXIiOlsid2lhIl0sImFwcGlkIjoiNzVkYmU3N2YtMTBhMy00ZTU5LTg1ZmQtOGMxMjc1NDRmMTdjIiwiYXBwaWRhY3IiOiIwIiwiZW1haWwiOiJBYmVMaUBtaWNyb3NvZnQuY29tIiwiZmFtaWx5X25hbWUiOiJMaW5jb2xuIiwiZ2l2ZW5fbmFtZSI6IkFiZSAoTVNGVCkiLCJpZHAiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC83MmY5ODhiZi04NmYxLTQxYWYtOTFhYi0yZDdjZDAxMjIyNDcvIiwiaXBhZGRyIjoiMjIyLjIyMi4yMjIuMjIiLCJuYW1lIjoiYWJlbGkiLCJvaWQiOiIwMjIyM2I2Yi1hYTFkLTQyZDQtOWVjMC0xYjJiYjkxOTQ0MzgiLCJyaCI6IkkiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJsM19yb0lTUVUyMjJiVUxTOXlpMmswWHBxcE9pTXo1SDNaQUNvMUdlWEEiLCJ0aWQiOiJmYTE1ZDY5Mi1lOWM3LTQ0NjAtYTc0My0yOWYyOTU2ZmQ0MjkiLCJ1bmlxdWVfbmFtZSI6ImFiZWxpQG1pY3Jvc29mdC5jb20iLCJ1dGkiOiJGVnNHeFlYSTMwLVR1aWt1dVVvRkFBIiwidmVyIjoiMS4wIn0.D3H6pMUtQnoJAGq6AHd"
                    },
                    "expiresOnTimestamp": {
                        "type": "integer",
                        "example": 1640975116000
                    }
                }
            },
            "EnvironmentalVariables": {
                "type": "object",
                "additionalProperties": {
                    "type": "string"
                }
            },
            "roleScopeTag": {
                "type": "object",
                "properties": {
                    "@odata.type": {
                        "type": "string",
                        "readOnly": true,
                        "default": "#microsoft.graph.roleScopeTag",
                        "enum": [
                            "#microsoft.graph.roleScopeTag"
                        ],
                        "description": "The type indicator for the MS Graph API to consume.",
                        "example": "#microsoft.graph.roleScopeTag"
                    },
                    "id": {
                        "type": "string",
                        "readOnly": true,
                        "example": "3",
                        "description": "A unique number representing the unique Role Scope tag object. This is an integer as a string. Key of the entity. This is automatically generated."
                    },
                    "description": {
                        "type": "string",
                        "description": "Description of the Role Scope Tag.",
                        "example": "PAWSecGrp=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\nUsrSecGrp=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\nSiloRootGrp=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\nBrkGls=9ed1e179-e179-9ed1-79e1-d19e79e1d19e\nUsrTag=9ed1e179-e179-9ed1-79e1-d19e79e1d19e"
                    },
                    "displayName": {
                        "type": "string",
                        "description": "The display or friendly name of the Role Scope Tag.",
                        "example": "Cloud-PAW-Management"
                    },
                    "isBuiltIn": {
                        "type": "boolean",
                        "readOnly": true,
                        "example": false,
                        "description": "This field is used to notate Microsoft managed Role Scope tags, e.g. the \"default\" tag."
                    }
                }
            }
        }
    }
}